<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.525">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Spatial Analytics - Research Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Spatial Analytics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./spatial_data_representations.html"> 
<span class="menu-text">Spatial Data Representations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./concepts_scale_resolution.html"> 
<span class="menu-text">Concepts of Scale and Resolution</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./generalization_maup.html"> 
<span class="menu-text">Generalization and the MAUP</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projections.html"> 
<span class="menu-text">Projections</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./textbook_notes.html"> 
<span class="menu-text">Textbook Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research_notes.html" aria-current="page"> 
<span class="menu-text">Research Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lab_work.html"> 
<span class="menu-text">Lab Work</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/clickityKlein/Spatial-Analytics">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/clickityKlein">
 <span class="dropdown-text">Carl Klein’s Main Page</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#paper-goodchild---spatial-information-science" id="toc-paper-goodchild---spatial-information-science" class="nav-link active" data-scroll-target="#paper-goodchild---spatial-information-science">Paper: Goodchild - Spatial Information Science</a>
  <ul class="collapse">
  <li><a href="#key-notes" id="toc-key-notes" class="nav-link" data-scroll-target="#key-notes">Key Notes:</a></li>
  </ul></li>
  <li><a href="#paper-how-long-is-the-coast-of-britain-statistical-self-similarity-and-fractional-dimensional---mandelbrot-good-proctor" id="toc-paper-how-long-is-the-coast-of-britain-statistical-self-similarity-and-fractional-dimensional---mandelbrot-good-proctor" class="nav-link" data-scroll-target="#paper-how-long-is-the-coast-of-britain-statistical-self-similarity-and-fractional-dimensional---mandelbrot-good-proctor">Paper: How Long is the Coast of Britain? Statistical Self-Similarity and Fractional Dimensional - Mandelbrot, Good, &amp; Proctor</a></li>
  <li><a href="#paper-maup-and-implications-for-landscape-ecology---jelinski-wu-nelson-brewer" id="toc-paper-maup-and-implications-for-landscape-ecology---jelinski-wu-nelson-brewer" class="nav-link" data-scroll-target="#paper-maup-and-implications-for-landscape-ecology---jelinski-wu-nelson-brewer">Paper: MAUP and Implications for Landscape Ecology - Jelinski &amp; Wu, Nelson &amp; Brewer</a></li>
  <li><a href="#paper-the-territorial-trap---agnew" id="toc-paper-the-territorial-trap---agnew" class="nav-link" data-scroll-target="#paper-the-territorial-trap---agnew">Paper: The Territorial Trap - Agnew</a></li>
  <li><a href="#paper-climate-as-a-risk-factor-for-armed-conflict---mach" id="toc-paper-climate-as-a-risk-factor-for-armed-conflict---mach" class="nav-link" data-scroll-target="#paper-climate-as-a-risk-factor-for-armed-conflict---mach">Paper: Climate As a Risk Factor For Armed Conflict - Mach</a></li>
  <li><a href="#discussion-gis-in-the-wild" id="toc-discussion-gis-in-the-wild" class="nav-link" data-scroll-target="#discussion-gis-in-the-wild">Discussion: GIS in the Wild</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research Notes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Important findings and summaries within the research papers and concurrent discussions.</p>
<section id="paper-goodchild---spatial-information-science" class="level1">
<h1>Paper: Goodchild - Spatial Information Science</h1>
<section id="key-notes" class="level2">
<h2 class="anchored" data-anchor-id="key-notes">Key Notes:</h2>
<p>The paper was written for a conference, the 4th International Symposium on Spatial Data Handling, which took place in 1990. There is some irony in reading this specific conference paper which is over three decades old, due to that fact that the author focuses on the longevity and survival of GIScience as an accepted institutional discipline. They touch on GIS being recongized more as a technology, and presses that GIS itself should be the science, only supported by technology applications rather than GIS as a supporting measure within the sciences. A few pathways Goodchild laid down to accomplish this is by “identifying key scientific questions” in GIScience and expanding on them intellectually. Essentially, they call for three communities specifically, “users, vendors, and researchers” to focus on the foundations of GIScience and then create the tools required to answer critical questions.</p>
</section>
</section>
<section id="paper-how-long-is-the-coast-of-britain-statistical-self-similarity-and-fractional-dimensional---mandelbrot-good-proctor" class="level1">
<h1>Paper: How Long is the Coast of Britain? Statistical Self-Similarity and Fractional Dimensional - Mandelbrot, Good, &amp; Proctor</h1>
<p>This paper explores the concept of measuring complex geographical curves, such as coastlines, using fractal geometry.</p>
<ul>
<li>Statistical Self-Similarity:
<ul>
<li>natural shapes, like coastlines, exhibit self-similarity</li>
<li>this means that each part of the coastline, when magnified, resembles the whole coastline</li>
</ul></li>
<li>Fractional Dimension:
<ul>
<li>compared with traditional geometry, which assigns integer dimensions such as
<ul>
<li>point: 0-dimensional</li>
<li>line: 1-dimensional</li>
<li>polygon: 2-dimensional</li>
<li>coastline: 1-dimensional (vector line / grouping of vector lines and indices)</li>
</ul></li>
<li>with fractal dimensions, the coast of Britain has a dimension of approximately 1.25</li>
</ul></li>
<li>Measurement Challenges:
<ul>
<li>length of a coastline varies significantly depending on the measurement scale used</li>
<li>as the measurement unit becomes smaller, the total length increases, reflecting the intricate details of the coastline
<ul>
<li>larger scale <span class="math inline">\(\rightarrow\)</span> greater perimeter</li>
</ul></li>
</ul></li>
<li>Practical Applications:
<ul>
<li>aside from geography, the concept of understanding the complexity of natural shapes and phenomena is crucial</li>
<li>the paper is foundational in the field of fractal geometry and highlights the limitations of traditional measurement methods for complex natural shapes</li>
</ul></li>
</ul>
</section>
<section id="paper-maup-and-implications-for-landscape-ecology---jelinski-wu-nelson-brewer" class="level1">
<h1>Paper: MAUP and Implications for Landscape Ecology - Jelinski &amp; Wu, Nelson &amp; Brewer</h1>
<p>This paper examines the the modifiable areal unit problem (MAUP) in the context of landscape ecology.</p>
<ul>
<li>Introduction of MAUP
<ul>
<li>In order to reduce bias and avoid spurious relationships when dealing with aggregated data and multiscaled spatial phenomena, tow problems must be addressed:
<ul>
<li>scale problem: same set of areal data is aggregated into several sets of larger areal units, with each combination leading to different data values and inferences</li>
<li>zoning problem: sets recombined into zones that are of the same size but located differently, again resulting in variation in data values and different conclusions</li>
</ul></li>
</ul></li>
<li>Using the imaging data, they addressed scale and zoning effects through several different simulations</li>
<li>Spatial Autocorrelation
<ul>
<li>degree of spatial clustering, or degree to which values at one locality are determined in part by the values at neighboring locations</li>
</ul></li>
<li>Measure of Spatial Autocorrelation
<ul>
<li>Moran’s I</li>
<li>Geary’s c</li>
</ul></li>
<li>Null Hypothesis
<ul>
<li>no spatial autocorrelation for a broad range of aggregation and zoning schems</li>
<li>did not use formal testing with p-values for individual hypotheses</li>
<li>still concluded that autocorrelation changes with scale, implying that there is evidence of a scale effect related to the MAUP across different aggregations</li>
</ul></li>
<li>Approaching for Addressing MAUP
<ul>
<li><strong>basic entity approach</strong>: advocates identification of individual entities that are not modifiable (<em>base unit</em>)
<ul>
<li>issues:
<ul>
<li>difficulty in identifying the base unit</li>
<li>too much detail can lead to overwhelming data collection, analysis, and modelling</li>
</ul></li>
</ul></li>
<li><strong>optimal zoning approach</strong>: system that maximizes interzonal variation and minimizes intrazonal variation
<ul>
<li>issues:
<ul>
<li>Fothering and Wong (1991) concluded that an optimal zoning system which minimizes spatial autocorrelation of all possible combinations of variables is not possible</li>
</ul></li>
</ul></li>
<li><strong>sensitivity analysis approach</strong>: get a sense of magnitude and scope of the varying statistical characteristics through a series of analyses
<ul>
<li>issues:
<ul>
<li>again, testing all possible combinations would be computationally and timely impractical</li>
</ul></li>
</ul></li>
<li><strong>new / novel methods of analysis</strong>:
<ul>
<li>suggested methods:
<ul>
<li>visualization over statsitcal analysis</li>
</ul></li>
</ul></li>
<li><strong>emphasis of spatial analysis on the rates of change</strong>: focus on how spatial patterns evolve over time rather than just looking at static snapshots
<ul>
<li>temporal dynamics: how spatial data changes over time periods to understand trends and patterns of change</li>
<li>rate of change metrics: metrics to quantify speed and direction of changes in spatial phenomena, which can provide more insights into the processes driving these changes</li>
<li>comparative analysis: comparing rates of change across different regions or scales to identify areas of rapid change or stability</li>
</ul></li>
</ul></li>
<li>Summary of Solutions:
<ul>
<li><strong>Multi-Scale Analysis</strong>: Conducting analyses at multiple spatial scales to understand how results vary with scale changes. This helps in identifying the scale at which patterns are most pronounced.</li>
<li><strong>Zoning Sensitivity Analysis</strong>: Testing different zoning schemes to see how changes in the boundaries of spatial units affect the results. This can help in understanding the robustness of the findings.</li>
<li><strong>Hierarchical Modeling</strong>: Using hierarchical models that account for data at different levels of aggregation. This approach can help in integrating data from various scales and reducing the impact of MAUP.</li>
<li><strong>Geostatistical Methods</strong>: Applying geostatistical techniques that consider spatial autocorrelation and provide more accurate estimates by accounting for the spatial structure of the data.</li>
<li><strong>Simulation and Resampling Techniques</strong>: Using simulation and resampling methods to assess the variability of results under different zoning and scaling scenarios. This can provide insights into the stability of the findings.</li>
</ul></li>
</ul>
<p>Although the MAUP is an integral problem within the geospatial sciences, the authors state that MAUP isn’t really a problem, more that it is reflective “of the real systems are hierarchically structured.”</p>
</section>
<section id="paper-the-territorial-trap---agnew" class="level1">
<h1>Paper: The Territorial Trap - Agnew</h1>
<p>The territorial trap is split into 3 pieces which challenge conventional views in international relations:</p>
<ul>
<li>States as Fixed Units of Sovereign Space:
<ul>
<li>flawed view of states as fixed, unchanging units of territory</li>
<li>overlooks historical and geographical variations in exercising power and control over territories</li>
</ul></li>
<li>Domestic/Foreign Polarity:
<ul>
<li>this binary view fails to account for the complex interactions and influences</li>
</ul></li>
<li>States as <em>containers of Society</em>:
<ul>
<li>the previous / accepted view: states as containers with societies held in by border</li>
<li>author’s challenge: dynamic and fluid nature of social, economic, and political processes that transcend boundaries</li>
</ul></li>
</ul>
<p>While states do have geographical boundaries, the interactions and influences that cross these boundaries make the concept of a state as a rigid, self-contained unit quite limited. Historical relevance, social dynamics, economic exchanges, and political processes often transcend these borders, leading to complex interdependencies and interactions between states.</p>
<p>This perspective encourages a more fluid and interconnected understanding of international relations, recognizing that states are part of a larger, dynamic global system rather than isolated entities.</p>
</section>
<section id="paper-climate-as-a-risk-factor-for-armed-conflict---mach" class="level1">
<h1>Paper: Climate As a Risk Factor For Armed Conflict - Mach</h1>
<p>This paper seeks to analyze climate change as a factor for armed conflict. Overall, it ranked low on the list of known drivers of organized armed conflict, at least on a direct basis. However, climate change affects resources, and there has been a general trend of climate change increasing, not decreasing, armed conflict. The authors also do state that in the event of climate-related resource scarcity, this can also <strong>lead to cooperation</strong> between groups.</p>
<p>Takeaways:</p>
<ul>
<li>Climate change not a <em>major</em> predictor for organized armed conflict, or isn’t recognized as such. At the very least, experts disagree, especially when analyzed as a direct contributor of organized armed conflict.</li>
<li>Even in the case of resource-management, when climate change threatens or limits resources such as food-yield, cooperation over conflict is expected. Not to say this is true for all climate-related resource scarcity scenarios.</li>
<li>Again, experts have some disagreement over the direct contribution of climate change to organized armed conflict.</li>
</ul>
</section>
<section id="discussion-gis-in-the-wild" class="level1">
<h1>Discussion: GIS in the Wild</h1>
<p>Roughly draws from <em>The Territorial Trap</em> and <em>Mach - Climate As a Risk Factor For Armed Conflict</em>.</p>
<p><strong>In the following notes, state is used as a general term which can be used to identify whole countries or faction-controlled areas.</strong></p>
<ul>
<li>State scale is easier to model, but not always accurate. This can lead to simple stories which can be leaving out complex relationships, and thus be misleading.</li>
<li>Armed conflict represented in map, especially constrained to state boundaries, only show part of the story.</li>
<li>Political lines / disputed border can change via perspective, which can be illustrated by IP address pings when searching Google Maps.</li>
<li>Internal vs.&nbsp;External non-total sovereignty
<ul>
<li>Internal Sovereignty
<ul>
<li>Definition: Internal sovereignty refers to the supreme authority within a state. It is about who holds the ultimate power and how this power is exercised over the state’s territory and population.</li>
<li>Focus: It deals with the relationship between the sovereign power and its subjects, ensuring that the state can enforce laws and maintain order within its borders1.</li>
<li>Example: The ability of a government to implement policies, collect taxes, and regulate activities within its territory.</li>
</ul></li>
<li>External Sovereignty
<ul>
<li>Definition: External sovereignty refers to the independence of a state from external control. It is the ability of a state to act autonomously and make decisions without interference from other states or external forces.</li>
<li>Focus: It emphasizes the state’s capacity to engage in international relations, enter treaties, and defend its territorial integrity against external threats2.</li>
<li>Example: A country’s right to determine its foreign policy and engage in diplomatic relations with other nations.</li>
</ul></li>
<li>Non-Sovereignty
<ul>
<li>Internal Non-Sovereignty: This could refer to situations where a state lacks full control over its internal affairs, possibly due to internal conflicts, weak governance, or external influence.</li>
<li>External Non-Sovereignty: This might describe a state that is heavily influenced or controlled by external powers, limiting its ability to act independently on the international stage.</li>
</ul></li>
</ul></li>
<li>However, the domestic/foreign separation doesn’t necessarily stop at the border.</li>
<li>How to escape the territorial trap (theoretically):
<ul>
<li>shatterbelts (crush zones, shatter zones)</li>
<li>clash of civilizations (i.e.&nbsp;west vs east, bloody borders)</li>
</ul></li>
<li>CLIMATE CHANGE AND ITS EFFECT OPERATES THROUGH MECHANISMS</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><a href="https://clickityklein.github.io/Carl-Klein/">About Carl Klein</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>